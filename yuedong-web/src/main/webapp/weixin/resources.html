<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; chaRset=utf-8" />
<meta name="author" content=" HouYanPing" /> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
	<title>课程列表</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<link rel="stylesheet" href="css/weui.css"/>
	<link rel="stylesheet" type="text/css" href="css/select.css">
</head>
<body>
<form action="" id="userInfo"> 
    <input type="hidden" id="userCode" name="userCode"></input>
	<div class="content pdo0">
		<div class="wf h">
			<div class="w90 h48">
				<span class="lefttitlt">名字</span>	
				<span class="rightinfo">
				<input type="text" class="nob" id="userName" name='userName' value="">
				</span>
				<div class="clear"></div>
			</div>
			<div class="w90 h48">
				<span class="lefttitlt">年龄</span>	
				<span class="rightinfo">
					<input type="text" class="nob" id="age" name="age" value="">
				</span>
			</div>
			<div class="w90 h48">
				<span class="lefttitlt">性别</span>	
				<span class="rightinfo">
					<input type="text" class="nob" id="sex" value="男" name="sex" readonly="readonly">
				</span>
			</div>
			<div class="w90 nob h48">
				<span class="lefttitlt">城市</span>	
				<span class="rightinfo">
				<input type="text" readonly="readonly" class="nob" id="addresing" name="addresing" value="" />
				</span>
				<div class="clear"></div>
			</div>
		</div>
	</div>
	<div class="content ">
		<div class="wf h pdo0">
			<div class="w90 h48">
				<span class="lefttitlt">手机号</span>	
				<span class="rightinfo">
					<input type="text" class="nob" id="telephone" value="" name="telephone">
						
				</span>
			</div>
		</div>
	</div>
    <div class="tijiao mt25">
       <button type="button" id="save"  value="保存">保存</button>
    </div> 

 </form> 
<div id="sexed"  style="display: none;">
	<div class="wraped"></div>
	<div class="listselect">
		<ul>
			<li>男</li>
			<li>女</li>
		</ul>
	</div>
</div>
<div id="addres"  style="display: none;">
	<div class="wraped"></div>
	<div class="addreslist xs">
		<ul >
			<li>杭州市</li>
		</ul>
	</div>
	<div class="addreslist qj" style="display: none;">
		<ul >
			<li>上城区</li>
			<li>下城区</li>
			<li>西湖区</li>
			<li>拱墅区</li>
			<li>余杭区</li>
			<li>萧山区</li>
			<li>滨江区</li>
			<li>江干区</li>
		</ul>
	</div>
</div>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
	$('#sex').click(function(){
		$('#sexed').show();
		 $('.listselect').animate({bottom:"0"}, 800);
	})
$('.listselect li').click(function(){
		$('.listselect li').addClass('selectedList').siblings().removeClass('selectedList');
		$('.listselect').animate({bottom:'90%'}, 10);
		$('#sexed').hide();
		var textv=$(this).html();
		$('#sex').val(textv);
})
	
	$('#addresing').click(function(){
		$('#addres').show();
		$('.xs').show().addClass('animation');
	})
})
$('.xs').click(function(){
	$('.qj').show().addClass('animation');
	$('.xs').hide().removeClass('animation');
})
var t1=$('.xs').text();
$('.qj li').click(function(){
	var t=$(this).text();
	$('#addres').hide();
	$('.qj').hide().removeClass('animation');
	$('#addresing').val(t1+t);
})
$('#save').click(function(){
	if(isNaN($('#age').val())){
	    alert("年龄的格式错误");
    }else if($('#telephone').val().length!=11){
		alert("手机号格式不正确");
	}else{
		  $.ajax({
				url : "/yuedong-weixin/user/client/1/update", // 提交的页面  
				data:$('#userInfo').serialize(),
				method : "post", // 设置请求类型为"POST"，默认为"GET"  
				dataType : 'json',
				error : function() { // 设置表单提交出错  
					alert("执行出错");
				},
				success : function(result) {
					if(result.resultCode=="00"){
						window.history.back();
					}else{
						alert("服务器异常");
					}
					
				},
				cache : false
			}); 
	}
	    
	
})
$(function(){
    var strUrl = window.location.href;
	var indexof = strUrl.indexOf("?");
	if(indexof != -1){
		if(strUrl.indexOf('&') != -1){
			var s = strUrl.substr(strUrl.indexOf("?")+1,strUrl.length)
			var str = s.split('&');
			for(var i=0;i<str.length;i++){
				  if(str[i].indexOf("userCode")!=-1){
					  strUrl = str[i].substr(str[i].indexOf("=")+1,str[i].length);
					  break;
				  }
			}
		}else{
			strUrl = strUrl.substr(strUrl.indexOf("=")+1,strUrl.length);
		}
	}else{
		strUrl = null;
	}
	
    if(null != strUrl){
		  $("#userCode").val(strUrl);
		  $.ajax({
				url : "/yuedong-weixin/user/client/1/detail?userCode="+$("#userCode").val(), // 提交的页面  
				method : "get", // 设置请求类型为"POST"，默认为"GET"  
				dataType : 'json',
				error : function() { // 设置表单提交出错  
					alert("执行出错");
				},
				success : function(result) {
					$("#userName").val(result.data['userName']);
					$("#age").val(result.data['age']);
					$("#telephone").val(result.data['telephone']);
					$('#sex').val(result.data['sex']);
					
					$('#addresing').val(result.data['locationCity']);
				},
				cache : false
			}); 
       }
})
</script>
</body>
</html>