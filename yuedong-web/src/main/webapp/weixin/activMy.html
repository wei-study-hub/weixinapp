<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; chaRset=utf-8" />
<meta name="author" content=" HouYanPing" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>课程列表</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="css/styles.css">
			<link rel="stylesheet" href="css/weui.css" />
			<link rel="stylesheet" type="text/css" href="css/select.css">
</head>
<body>
	<input type="hidden" id="userCode" name="userCode"></input>
	<div class="tabList center mt0">
		<span class="fn18 brllow" id="class">体验课订单</span> <span class="fn18"
			id="activc">课程订单</span>
	</div>
	<div id="cursor">
		
	</div>
	<div id="active" style="display: none;">
		
	</div>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
	$('#class').click(function(){
		$('#cursor').show();
		$('#active').hide();
		$(this).addClass('brllow').siblings().removeClass('brllow');
	})
	$('#activc').click(function(){
		$('#cursor').hide();
		$('#active').show();
		$(this).addClass('brllow').siblings().removeClass('brllow');
	})
	$(function(){
		var strUrl = window.location.href;
		var indexof = strUrl.indexOf("?");
		var type = null;
		if (indexof != -1) {
			if (strUrl.indexOf('&') != -1) {
				var s = strUrl.substr(strUrl.indexOf("?") + 1,
						strUrl.length)
				var str = s.split('&');
				for (var i = 0; i < str.length; i++) {
					if (str[i].indexOf("userCode") != -1) {
						strUrl = str[i].substr(str[i].indexOf("=") + 1,
								str[i].length);
						
					}else if(str[i].indexOf("type") != -1){
						 type = str[i].substr(str[i].indexOf("=") + 1,
									str[i].length);
					}else {
						
					}
					
				}
			} else {
				strUrl = strUrl.substr(strUrl.indexOf("=") + 1,
						strUrl.length);
			}
		} else {
			strUrl = null;
		}
		if (null != strUrl) {
				$('#userCode').val(strUrl);
				$.ajax({
					url : "/yuedong-weixin/order/client/1/list", // 订单列表
					data : {
						"userCode":$('#userCode').val(),
	                    "index":"1"
					},
					method : "POST", // 设置请求类型为"POST"，默认为"GET"  
					dataType : 'json',
					error : function() { // 设置表单提交出错  
						alert("执行出错");
					},
					success : function(result) {
						if(result.resultCode=='00')
                        {  
						   var courseModel = result.data['orderModels']['courseModels'];
						   var activityModel = result.data['orderModels']['cModels'];
						  /*  alert(courseModel.length);
						   alert(activityModel.length); */
						  for(var i=0;i<courseModel.length;i++){
					    	 var line = '<div class="outbox"><div class="innerBox"><h3 class="tottex">'+
					    	    courseModel[i]['title']+'<span class="static">';
						    	if(courseModel[i]['status'] == '00'){
				            		  line+="已付款";
				            	}else if(courseModel[i]['status']=='01'){
				            		  line +="待付款";
				            	}else if(courseModel[i]['status']=='03'){
				            		  line +="已报名";
				            	}else{
				            		line +="已结束";
				            	}
					    	    line+='</span></h3><div class="fl leftImgBox">'+
					    	    '<img src="'+courseModel[i]['imgUrl']+'"></div><div class="fl frtextbox wb50"><p class="money">'+
					    	    '免费</p><p class="time">'+   
					    	    courseModel[i]['dateTime']+'</p><p class="addres">'+  
					    	    courseModel[i]['address']+'</p></div><div class="clear"></div></div></div>';
					    	 $('#cursor').append(line);	 
					    	/* private String orderNo;
						       private String goodsCode; */
						  }
			              for(var i=0;i<activityModel.length;i++){
			            	  var line = '<div class="outbox"><div class="innerBox"><h3 class="tottex">'+
			            	  activityModel[i]['title']+'<span class="static">';
			            	  if(activityModel[i]['status'] == '00'){
			            		  line+="已付款";
			            	  }else if(activityModel[i]['status']=='01'){
			            		  line +="待付款";
			            	  }
			            	  line+='</span></h3><div class="fl leftImgBox">'+
					    	    '<img src="'+activityModel[i]['imgUrl']+'"></div><div class="fl frtextbox wb50"><p class="money">¥'+
					    	    activityModel[i]['price']/100+'</p><p class="time">'+   
					    	    activityModel[i]['dateTime']+'</p><p class="addres">'+  
					    	    activityModel[i]['address']+'</p></div><div class="clear"></div></div></div>';
					    	 $('#active').append(line);	
						     
						  }
			              if(type=="course"){    
			                 
			              }else{
			            	  $('#cursor').hide();
			          		  $('#active').show();
			          		  $('#activc').addClass('brllow').siblings().removeClass('brllow');
			          		  //为active增加样式brllow  删除同级元素的brllow样式
			              }
			              
			              /* <span class="fn18 brllow" id="class">课程订单</span> <span class="fn18"
			      			id="activc">活动订单</span> */
					    }else
						{
							alert("系统异常");
						}
					},
					cache : false
				});
			}
		
	})	
</script>
</body>
</html>